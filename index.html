<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Виртуальная лаборатория химии</title>
<style>
body {
  margin:0;
  font-family: Arial, sans-serif;
  background-color: #ffffff;
  position: relative;
  overflow-x: hidden;
}

/* Навигация */
nav {
  display: flex;
  justify-content: center;
  background-color: #1A237E;
  padding: 10px;
}

nav a {
  color: white;
  text-decoration: none;
  margin: 0 15px;
  font-weight: bold;
  position: relative;
  transition: all 0.3s;
}

/* Свечение кнопок при наведении */
nav a:hover {
  text-shadow: 0 0 10px #FFC107, 0 0 20px #FF9800;
}

/* SVG фоны */
.svg-bg {
  position: absolute;
  width: 200px;
  height: 200px;
  opacity: 0.3;
}
.svg-top-left { top: 0; left: 0; }
.svg-bottom-right { bottom: 0; right: 0; }

/* Модальное окно */
.modal {
  display: none;
  position: fixed;
  z-index: 10;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  overflow:auto;
  background-color: rgba(0,0,0,0.7);
}

.modal-content {
  background-color: #fefefe;
  margin: 50px auto;
  padding: 20px;
  border-radius: 15px;
  width: 90%;
  max-width: 800px;
  text-align: center;
  position: relative;
}

.close {
  position: absolute;
  top: 10px;
  right: 25px;
  font-size: 30px;
  cursor: pointer;
}

/* Название и уравнение реакции */
#reaction-title {
  font-size: 36px;
  color: #1A237E;
  margin-bottom: 15px;
}

#reaction-equation {
  font-size: 28px; /* увеличено на 30% */
  color: #222;
  margin-top: 15px;
  text-align: center;
  white-space: pre-wrap;
}

/* Калькулятор */
#calculator {
  margin: 20px auto;
  max-width: 400px;
  text-align: center;
}
#calculator input {
  width: 90%;
  padding: 10px;
  margin-bottom: 10px;
  font-size: 18px;
}
#calculator button {
  padding: 10px 20px;
  font-size: 18px;
  cursor: pointer;
}
#error-message {
  color: red;
  font-weight: bold;
  margin-top: 10px;
}

/* Видео реакций */
video {
  max-width: 100%;
  border-radius: 10px;
}
</style>
</head>
<body>

<!-- SVG элементы -->
<img src="svg1.svg" class="svg-bg svg-top-left">
<img src="svg2.svg" class="svg-bg svg-bottom-right">

<!-- Навигация -->
<nav>
  <a href="#" class="lang-btn" data-lang="ru" data-key="home">Главная</a>
  <a href="#" class="lang-btn" data-lang="kz" data-key="home">Басты бет</a>

  <a href="#" class="lang-btn" data-lang="ru" data-key="animations">Анимации</a>
  <a href="#" class="lang-btn" data-lang="kz" data-key="animations">Анимациялар</a>
</nav>

<!-- Калькулятор -->
<div id="calculator">
  <input type="text" id="formula" placeholder="Введите формулу (например H2O)">
  <button onclick="calculateMass()">Рассчитать массу</button>
  <div id="result"></div>
  <div id="error-message"></div>
</div>

<!-- Кнопки реакций -->
<div id="reaction-buttons" style="text-align:center;">
  <button onclick="openReactionModal('reaction1')">Горение водорода</button>
  <button onclick="openReactionModal('reaction2')">Горение магния</button>
  <button onclick="openReactionModal('reaction3')">Ржавление железа</button>
  <button onclick="openReactionModal('reaction4')">Нейтрализация кислоты</button>
  <button onclick="openReactionModal('reaction5')">Растворение соли</button>
  <button onclick="openReactionModal('reaction6')">Горение углерода</button>
  <button onclick="openReactionModal('reaction7')">Взрыв аммония</button>
  <button onclick="openReactionModal('reaction8')">Горение натрия</button>
  <button onclick="openReactionModal('reaction9')">Окисление меди</button>
  <button onclick="openReactionModal('reaction10')">Гидролиз воды</button>
</div>

<!-- Модальное окно -->
<div id="reaction-modal" class="modal">
  <div class="modal-content">
    <span class="close" onclick="closeReactionModal()">&times;</span>
    <h2 id="reaction-title"></h2>
    <div id="reaction-animation"></div>
    <pre id="reaction-equation"></pre>
  </div>
</div>

<script>
// ===== Калькулятор =====
const atomicMass = {
  H: 1.008, He: 4.0026, Li: 6.94, Be: 9.0122, B: 10.81, C: 12.01, N: 14.01, O: 16.00, F: 18.998, Ne: 20.180,
  Na: 22.990, Mg: 24.305, Al: 26.982, Si: 28.085, P: 30.974, S: 32.06, Cl: 35.45, Ar: 39.948, K: 39.098, Ca: 40.078,
  Sc: 44.956, Ti: 47.867, V: 50.942, Cr: 51.996, Mn: 54.938, Fe: 55.845, Co: 58.933, Ni: 58.693, Cu: 63.546, Zn: 65.38,
  Ga: 69.723, Ge: 72.630, As: 74.922, Se: 78.971, Br: 79.904, Kr: 83.798, Rb: 85.468, Sr: 87.62, Y: 88.906, Zr: 91.224,
  Nb: 92.906, Mo: 95.95, Tc: 98, Ru: 101.07, Rh: 102.91, Pd: 106.42, Ag: 107.87, Cd: 112.41, In: 114.82, Sn: 118.71,
  Sb: 121.76, Te: 127.60, I: 126.90, Xe: 131.29, Cs: 132.91, Ba: 137.33, La: 138.91, Ce: 140.12, Pr: 140.91, Nd: 144.24,
  Pm: 145, Sm: 150.36, Eu: 151.96, Gd: 157.25, Tb: 158.93, Dy: 162.50, Ho: 164.93, Er: 167.26, Tm: 168.93, Yb: 173.05,
  Lu: 174.97, Hf: 178.49, Ta: 180.95, W: 183.84, Re: 186.21, Os: 190.23, Ir: 192.22, Pt: 195.08, Au: 196.97, Hg: 200.59,
  Tl: 204.38, Pb: 207.2, Bi: 208.98, Po: 209, At: 210, Rn: 222, Fr: 223, Ra: 226, Ac: 227, Th: 232.04, Pa: 231.04,
  U: 238.03, Np: 237, Pu: 244, Am: 243, Cm: 247, Bk: 247, Cf: 251, Es: 252, Fm: 257, Md: 258, No: 259, Lr: 262,
  Rf: 267, Db: 270, Sg: 271, Bh: 270, Hs: 277, Mt: 276, Ds: 281, Rg: 282, Cn: 285, Fl: 289, Lv: 293, Ts: 294, Og: 294
};


function calculateMass() {
  const formula = document.getElementById("formula").value;
  const resultDiv = document.getElementById("result");
  const errorDiv = document.getElementById("error-message");
  resultDiv.innerText = "";
  errorDiv.innerText = "";

  try {
    const regex = /([A-Z][a-z]?)(\d*)/g;
    let match;
    let mass = 0;
    while ((match = regex.exec(formula)) !== null) {
      const elem = match[1];
      const count = parseInt(match[2] || "1");
      if (!elements[elem]) {
        throw new Error(`Ошибка: элемент ${elem} не найден`);
      }
      mass += elements[elem]*count;
    }
    resultDiv.innerText = "Молекулярная масса: "+mass.toFixed(3);
  } catch(e) {
    errorDiv.innerText = e.message;
  }
}

// ===== Модальное окно реакций с видео =====
function openReactionModal(id){
  const modal = document.getElementById('reaction-modal');
  modal.setAttribute("data-current-reaction", id);
  const title = document.getElementById('reaction-title');
  const eq = document.getElementById('reaction-equation');
  const anim = document.getElementById('reaction-animation');
  anim.innerHTML = "";
  modal.style.display = 'block';

  title.innerText = translations[currentLang][id+"_title"];
  eq.innerText = translations[currentLang][id+"_eq"];

  switch(id){
    case 'reaction1':
      anim.innerHTML = `<video width="100%" controls autoplay>
                          <source src="videos/hydrogen_burning.mp4" type="video/mp4">
                        </video>`;
      break;
    case 'reaction2':
      anim.innerHTML = `<video width="100%" controls autoplay>
                          <source src="videos/magnesium_burning.mp4" type="video/mp4">
                        </video>`;
      break;
    case 'reaction3':
      anim.innerHTML = `<video width="100%" controls autoplay>
                          <source src="videos/iron_rust.mp4" type="video/mp4">
                        </video>`;
      break;
    case 'reaction4':
      anim.innerHTML = `<video width="100%" controls autoplay>
                          <source src="videos/neutralization.mp4" type="video/mp4">
                        </video>`;
      break;
    case 'reaction5':
      anim.innerHTML = `<video width="100%" controls autoplay>
                          <source src="videos/salt_dissolve.mp4" type="video/mp4">
                        </video>`;
      break;
    case 'reaction6':
      anim.innerHTML = `<video width="100%" controls autoplay>
                          <source src="videos/carbon_burning.mp4" type="video/mp4">
                        </video>`;
      break;
    case 'reaction7':
      anim.innerHTML = `<video width="100%" controls autoplay>
                          <source src="videos/ammonium_explosion.mp4" type="video/mp4">
                        </video>`;
      break;
    case 'reaction8':
      anim.innerHTML = `<video width="100%" controls autoplay>
                          <source src="videos/sodium_burning.mp4" type="video/mp4">
                        </video>`;
      break;
    case 'reaction9':
      anim.innerHTML = `<video width="100%" controls autoplay>
                          <source src="videos/copper_oxidation.mp4" type="video/mp4">
                        </video>`;
      break;
    case 'reaction10':
      anim.innerHTML = `<video width="100%" controls autoplay>
                          <source src="videos/water_hydrolysis.mp4" type="video/mp4">
                        </video>`;
      break;
  }
}

function closeReactionModal(){
  document.getElementById('reaction-modal').style.display='none';
}

// ===== Переключение языков =====
let currentLang = "ru";
const translations = {
  ru: {
    home: "Главная",
    animations: "Анимации",
    reaction1_title: "Горение водорода",
    reaction1_eq: "2 H2 + O2 = 2 H2O",
    reaction2_title: "Горение магния",
    reaction2_eq: "2 Mg + O2 = 2 MgO",
    reaction3_title: "Ржавление железа",
    reaction3_eq: "4 Fe + 3 O2 + 6 H2O = 4 Fe(OH)3",
    reaction4_title: "Нейтрализация кислоты",
    reaction4_eq: "HCl + NaOH = NaCl + H2O",
    reaction5_title: "Растворение соли",
    reaction5_eq: "NaCl(s) → Na+(aq) + Cl-(aq)",
    reaction6_title: "Горение углерода",
    reaction6_eq: "C + O2 = CO2",
    reaction7_title: "Взрыв аммония",
    reaction7_eq: "2 NH4NO3 → 2 N2 + O2 + 4 H2O",
    reaction8_title: "Горение натрия",
    reaction8_eq: "2 Na + 2 H2O = 2 NaOH + H2",
    reaction9_title: "Окисление меди",
    reaction9_eq: "2 Cu + O2 → 2 CuO",
    reaction10_title: "Гидролиз воды",
    reaction10_eq: "H2O → H+ + OH-"
  },
  kz: {
    home: "Басты бет",
    animations: "Анимациялар",
    reaction1_title: "Сутегі жануы",
    reaction1_eq: "2 H2 + O2 = 2 H2O",
    reaction2_title: "Магний жануы",
    reaction2_eq: "2 Mg + O2 = 2 MgO",
    reaction3_title: "Темірдің тоттануы",
    reaction3_eq: "4 Fe + 3 O2 + 6 H2O = 4 Fe(OH)3",
    reaction4_title: "Қышқылды бейтараптау",
    reaction4_eq: "HCl + NaOH = NaCl + H2O",
    reaction5_title: "Тұз еріту",
    reaction5_eq: "NaCl(s) → Na+(aq) + Cl-(aq)",
    reaction6_title: "Көміртек жануы",
    reaction6_eq: "C + O2 = CO2",
    reaction7_title: "Аммонийдің жарылысы",
    reaction7_eq: "2 NH4NO3 → 2 N2 + O2 + 4 H2O",
    reaction8_title: "Натрий жануы",
    reaction8_eq: "2 Na + 2 H2O = 2 NaOH + H2",
    reaction9_title: "Мыс тотығуы",
    reaction9_eq: "2 Cu + O2 → 2 CuO",
    reaction10_title: "Судың гидролизі",
    reaction10_eq: "H2O → H+ + OH-"
  }
};

document.querySelectorAll(".lang-btn").forEach(btn=>{
  btn.addEventListener("click", e=>{
    e.preventDefault();
    const lang = btn.getAttribute("data-lang");
    currentLang = lang;
    setLanguage(lang);
  });
});

function setLanguage(lang){
  // Вкладки
  document.querySelectorAll("nav a[data-key]").forEach(el=>{
    const key = el.getAttribute("data-key");
    if(translations[lang][key]){
      el.innerText = translations[lang][key];
    }
  });

  // Модалка
  const modal = document.getElementById("reaction-modal");
  if(modal.style.display==='block'){
    const id = modal.getAttribute("data-current-reaction");
    const title = document.getElementById("reaction-title");
    const eq = document.getElementById("reaction-equation");
    if(id){
      title.innerText = translations[lang][id+"_title"];
      eq.innerText = translations[lang][id+"_eq"];
    }
  }
}
</script>

</body>
</html>
